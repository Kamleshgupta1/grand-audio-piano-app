
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Piano-specific design system with advanced styling */

@layer base {
  :root {
    --background: 220 10% 8%;
    --foreground: 220 5% 95%;

    --card: 220 10% 10%;
    --card-foreground: 220 5% 95%;

    --popover: 220 10% 10%;
    --popover-foreground: 220 5% 95%;

    --primary: 217 91% 60%;
    --primary-foreground: 220 10% 8%;

    --secondary: 220 5% 15%;
    --secondary-foreground: 220 5% 95%;

    --muted: 220 5% 15%;
    --muted-foreground: 220 5% 70%;

    --accent: 220 5% 15%;
    --accent-foreground: 220 5% 95%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 220 5% 95%;

    --border: 220 5% 20%;
    --input: 220 5% 15%;
    --ring: 217 91% 60%;

    --radius: 0.5rem;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    overflow-x: hidden;
  }

  * {
    @apply border-border;
  }
}

@layer components {
  .piano-key-white {
    @apply bg-white hover:bg-gray-50 active:bg-gray-100 
           border border-gray-300 shadow-lg
           transition-all duration-75 ease-out
           cursor-pointer select-none
           relative overflow-hidden;
    
    background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
    border-radius: 0 0 8px 8px;
    
    &:hover {
      background: linear-gradient(to bottom, #f8f9fa 0%, #e9ecef 100%);
      transform: translateY(1px);
    }
    
    &:active, &.pressed {
      background: linear-gradient(to bottom, #e9ecef 0%, #dee2e6 100%);
      transform: translateY(3px);
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
  }

  .piano-key-black {
    @apply bg-gray-900 hover:bg-gray-800 active:bg-gray-700
           border border-gray-800 shadow-xl
           transition-all duration-75 ease-out
           cursor-pointer select-none
           relative overflow-hidden;
    
    background: linear-gradient(to bottom, #1a1a1a 0%, #000000 100%);
    border-radius: 0 0 6px 6px;
    
    &:hover {
      background: linear-gradient(to bottom, #2d2d2d 0%, #1a1a1a 100%);
      transform: translateY(1px);
    }
    
    &:active, &.pressed {
      background: linear-gradient(to bottom, #404040 0%, #2d2d2d 100%);
      transform: translateY(2px);
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
    }
  }

  .key-label {
    @apply absolute bottom-2 left-1/2 transform -translate-x-1/2
           text-xs font-medium opacity-60
           pointer-events-none select-none;
  }

  .note-indicator {
    @apply absolute -top-8 left-1/2 transform -translate-x-1/2
           bg-blue-500 text-white px-2 py-1 rounded
           text-xs font-bold pointer-events-none
           animate-note-indicator;
  }

  .control-button {
    @apply bg-card hover:bg-accent text-card-foreground
           border border-border rounded-lg px-4 py-2
           transition-all duration-200 ease-out
           cursor-pointer select-none
           hover:shadow-lg hover:scale-105
           active:scale-95;
  }

  .volume-slider {
    @apply w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer;
    
    &::-webkit-slider-thumb {
      @apply appearance-none w-4 h-4 bg-primary rounded-full cursor-pointer
             hover:scale-110 transition-transform duration-150;
    }
    
    &::-moz-range-thumb {
      @apply w-4 h-4 bg-primary rounded-full cursor-pointer border-0
             hover:scale-110 transition-transform duration-150;
    }
  }

  .recording-indicator {
    @apply flex items-center gap-2 text-red-500 animate-pulse;
    
    &::before {
      content: '';
      @apply w-3 h-3 bg-red-500 rounded-full animate-ping;
    }
  }

  .piano-container {
    @apply relative bg-gradient-to-b from-gray-800 to-gray-900
           border border-gray-700 rounded-xl shadow-2xl
           p-6 overflow-hidden;
    
    background-image: 
      radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
  }

  .visualizer {
    @apply absolute top-0 left-0 right-0 h-16 
           bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-pink-500/20
           opacity-0 transition-opacity duration-300;
    
    &.active {
      @apply opacity-100;
      animation: pulse 0.5s ease-in-out;
    }
  }
}

@layer utilities {
  .text-shadow {
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  
  .glow {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
  }
  
  .perspective-1000 {
    perspective: 1000px;
  }
  
  .preserve-3d {
    transform-style: preserve-3d;
  }
}

/* Responsive design for mobile devices */
@media (max-width: 768px) {
  .piano-key-white {
    min-height: 120px;
  }
  
  .piano-key-black {
    min-height: 80px;
  }
  
  .key-label {
    @apply text-xs;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .piano-key-white {
    @apply border-2 border-black;
  }
  
  .piano-key-black {
    @apply border-2 border-white;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
